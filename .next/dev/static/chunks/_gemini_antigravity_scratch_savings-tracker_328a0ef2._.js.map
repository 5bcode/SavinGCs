{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/components/Dashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface SavingsPot {\r\n    id: number;\r\n    name: string;\r\n    goal_amount: number | null;\r\n    color: string;\r\n    icon: string;\r\n    total_balance: number;\r\n}\r\n\r\nexport default function Dashboard() {\r\n    const [pots, setPots] = useState<SavingsPot[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchPots();\r\n    }, []);\r\n\r\n    const fetchPots = async () => {\r\n        try {\r\n            const res = await fetch('/api/pots');\r\n            const data = await res.json();\r\n            setPots(data.pots || []);\r\n        } catch (error) {\r\n            console.error('Error fetching pots:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const totalSavings = pots.reduce((sum, pot) => sum + (pot.total_balance || 0), 0);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"grid grid-2 mt-lg\">\r\n                {[1, 2, 3].map((i) => (\r\n                    <div key={i} className=\"skeleton\" style={{ height: '200px' }} />\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* Total overview */}\r\n            <div className=\"card mb-xl\" style={{ background: 'linear-gradient(135deg, #059669 0%, #047857 100%)', color: 'white' }}>\r\n                <p style={{ fontSize: '0.875rem', opacity: 0.9, marginBottom: '0.5rem' }}>Total Savings</p>\r\n                <h1 className=\"currency currency-large mb-0\">\r\n                    ¬£{totalSavings.toLocaleString('en-GB', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                </h1>\r\n            </div>\r\n\r\n            {/* Savings pots grid */}\r\n            {pots.length === 0 ? (\r\n                <div className=\"card text-center\">\r\n                    <p className=\"text-muted\">No savings pots yet. Create one to get started!</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-2\">\r\n                    {pots.map((pot) => (\r\n                        <PotCard key={pot.id} pot={pot} />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction PotCard({ pot }: { pot: SavingsPot }) {\r\n    const progress = pot.goal_amount ? (pot.total_balance / pot.goal_amount) * 100 : 0;\r\n    const isGoalMet = pot.goal_amount && pot.total_balance >= pot.goal_amount;\r\n\r\n    return (\r\n        <a href={`/pot/${pot.id}`} className=\"card\" style={{ textDecoration: 'none', color: 'inherit' }}>\r\n            <div className=\"flex items-center justify-between mb-md\">\r\n                <div>\r\n                    <h3 className=\"card-title mb-0\">{pot.name}</h3>\r\n                    {pot.goal_amount && (\r\n                        <p className=\"text-muted\" style={{ fontSize: '0.875rem' }}>\r\n                            Goal: ¬£{pot.goal_amount.toLocaleString('en-GB')}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n                <div\r\n                    style={{\r\n                        width: '48px',\r\n                        height: '48px',\r\n                        borderRadius: 'var(--radius-md)',\r\n                        background: pot.color + '20',\r\n                        color: pot.color,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        fontSize: '1.5rem'\r\n                    }}\r\n                >\r\n                    {getIcon(pot.icon)}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mb-md\">\r\n                <div className=\"flex justify-between mb-sm\">\r\n                    <span className=\"currency currency-medium\" style={{ color: pot.color }}>\r\n                        ¬£{pot.total_balance.toLocaleString('en-GB', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                    </span>\r\n                    {pot.goal_amount && (\r\n                        <span className=\"text-muted\" style={{ fontSize: '0.875rem', fontWeight: 600 }}>\r\n                            {Math.min(progress, 100).toFixed(0)}%\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {pot.goal_amount && (\r\n                    <div className=\"progress-container\">\r\n                        <div\r\n                            className=\"progress-bar\"\r\n                            style={{\r\n                                width: `${Math.min(progress, 100)}%`,\r\n                                background: `linear-gradient(90deg, ${pot.color} 0%, ${pot.color}dd 100%)`\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {isGoalMet && (\r\n                <div\r\n                    style={{\r\n                        padding: '0.5rem',\r\n                        borderRadius: 'var(--radius-sm)',\r\n                        background: 'var(--success)',\r\n                        color: 'white',\r\n                        fontSize: '0.875rem',\r\n                        fontWeight: 600,\r\n                        textAlign: 'center'\r\n                    }}\r\n                >\r\n                    üéâ Goal Reached!\r\n                </div>\r\n            )}\r\n        </a>\r\n    );\r\n}\r\n\r\nfunction getIcon(icon: string) {\r\n    const icons: Record<string, string> = {\r\n        'piggy-bank': 'üê∑',\r\n        'house': 'üè°',\r\n        'car': 'üöó',\r\n        'vacation': 'üèñÔ∏è',\r\n        'emergency': 'üö®',\r\n        'wedding': 'üíç',\r\n        'education': 'üéì',\r\n        'savings': 'üí∞'\r\n    };\r\n    return icons[icon] || 'üí∞';\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAae,SAAS;;IACpB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qOAAQ,EAAe,EAAE;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qOAAQ,EAAC;IAEvC,IAAA,sOAAS;+BAAC;YACN;QACJ;8BAAG,EAAE;IAEL,MAAM,YAAY;QACd,IAAI;YACA,MAAM,MAAM,MAAM,MAAM;YACxB,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,KAAK,IAAI,IAAI,EAAE;QAC3B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,wBAAwB;QAC1C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,eAAe,KAAK,MAAM,CAAC,CAAC,KAAK,MAAQ,MAAM,CAAC,IAAI,aAAa,IAAI,CAAC,GAAG;IAE/E,IAAI,SAAS;QACT,qBACI,yPAAC;YAAI,WAAU;sBACV;gBAAC;gBAAG;gBAAG;aAAE,CAAC,GAAG,CAAC,CAAC,kBACZ,yPAAC;oBAAY,WAAU;oBAAW,OAAO;wBAAE,QAAQ;oBAAQ;mBAAjD;;;;;;;;;;IAI1B;IAEA,qBACI,yPAAC;;0BAEG,yPAAC;gBAAI,WAAU;gBAAa,OAAO;oBAAE,YAAY;oBAAqD,OAAO;gBAAQ;;kCACjH,yPAAC;wBAAE,OAAO;4BAAE,UAAU;4BAAY,SAAS;4BAAK,cAAc;wBAAS;kCAAG;;;;;;kCAC1E,yPAAC;wBAAG,WAAU;;4BAA+B;4BACvC,aAAa,cAAc,CAAC,SAAS;gCAAE,uBAAuB;gCAAG,uBAAuB;4BAAE;;;;;;;;;;;;;YAKnG,KAAK,MAAM,KAAK,kBACb,yPAAC;gBAAI,WAAU;0BACX,cAAA,yPAAC;oBAAE,WAAU;8BAAa;;;;;;;;;;qCAG9B,yPAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,oBACP,yPAAC;wBAAqB,KAAK;uBAAb,IAAI,EAAE;;;;;;;;;;;;;;;;AAM5C;GAxDwB;KAAA;AA0DxB,SAAS,QAAQ,EAAE,GAAG,EAAuB;IACzC,MAAM,WAAW,IAAI,WAAW,GAAG,AAAC,IAAI,aAAa,GAAG,IAAI,WAAW,GAAI,MAAM;IACjF,MAAM,YAAY,IAAI,WAAW,IAAI,IAAI,aAAa,IAAI,IAAI,WAAW;IAEzE,qBACI,yPAAC;QAAE,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE;QAAE,WAAU;QAAO,OAAO;YAAE,gBAAgB;YAAQ,OAAO;QAAU;;0BAC1F,yPAAC;gBAAI,WAAU;;kCACX,yPAAC;;0CACG,yPAAC;gCAAG,WAAU;0CAAmB,IAAI,IAAI;;;;;;4BACxC,IAAI,WAAW,kBACZ,yPAAC;gCAAE,WAAU;gCAAa,OAAO;oCAAE,UAAU;gCAAW;;oCAAG;oCAC/C,IAAI,WAAW,CAAC,cAAc,CAAC;;;;;;;;;;;;;kCAInD,yPAAC;wBACG,OAAO;4BACH,OAAO;4BACP,QAAQ;4BACR,cAAc;4BACd,YAAY,IAAI,KAAK,GAAG;4BACxB,OAAO,IAAI,KAAK;4BAChB,SAAS;4BACT,YAAY;4BACZ,gBAAgB;4BAChB,UAAU;wBACd;kCAEC,QAAQ,IAAI,IAAI;;;;;;;;;;;;0BAIzB,yPAAC;gBAAI,WAAU;;kCACX,yPAAC;wBAAI,WAAU;;0CACX,yPAAC;gCAAK,WAAU;gCAA2B,OAAO;oCAAE,OAAO,IAAI,KAAK;gCAAC;;oCAAG;oCAClE,IAAI,aAAa,CAAC,cAAc,CAAC,SAAS;wCAAE,uBAAuB;wCAAG,uBAAuB;oCAAE;;;;;;;4BAEpG,IAAI,WAAW,kBACZ,yPAAC;gCAAK,WAAU;gCAAa,OAAO;oCAAE,UAAU;oCAAY,YAAY;gCAAI;;oCACvE,KAAK,GAAG,CAAC,UAAU,KAAK,OAAO,CAAC;oCAAG;;;;;;;;;;;;;oBAK/C,IAAI,WAAW,kBACZ,yPAAC;wBAAI,WAAU;kCACX,cAAA,yPAAC;4BACG,WAAU;4BACV,OAAO;gCACH,OAAO,GAAG,KAAK,GAAG,CAAC,UAAU,KAAK,CAAC,CAAC;gCACpC,YAAY,CAAC,uBAAuB,EAAE,IAAI,KAAK,CAAC,KAAK,EAAE,IAAI,KAAK,CAAC,QAAQ,CAAC;4BAC9E;;;;;;;;;;;;;;;;;YAMf,2BACG,yPAAC;gBACG,OAAO;oBACH,SAAS;oBACT,cAAc;oBACd,YAAY;oBACZ,OAAO;oBACP,UAAU;oBACV,YAAY;oBACZ,WAAW;gBACf;0BACH;;;;;;;;;;;;AAMjB;MA1ES;AA4ET,SAAS,QAAQ,IAAY;IACzB,MAAM,QAAgC;QAClC,cAAc;QACd,SAAS;QACT,OAAO;QACP,YAAY;QACZ,aAAa;QACb,WAAW;QACX,aAAa;QACb,WAAW;IACf;IACA,OAAO,KAAK,CAAC,KAAK,IAAI;AAC1B"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/components/Login.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\ninterface LoginProps {\r\n    onLogin: (user: any) => void;\r\n}\r\n\r\nexport default function Login({ onLogin }: LoginProps) {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/auth/login', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ username, password })\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            if (!res.ok) {\r\n                setError(data.error || 'Login failed');\r\n                return;\r\n            }\r\n\r\n            onLogin(data.user);\r\n        } catch (err) {\r\n            setError('An error occurred. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"page\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', background: 'linear-gradient(135deg, #059669 0%, #047857 100%)' }}>\r\n            <div className=\"card\" style={{ width: '100%', maxWidth: '400px', margin: 'var(--spacing-md)' }}>\r\n                <div className=\"text-center mb-xl\">\r\n                    <div style={{ fontSize: '3rem', marginBottom: 'var(--spacing-md)' }}>üè°</div>\r\n                    <h1 style={{ marginBottom: 'var(--spacing-sm)' }}>Savings Tracker</h1>\r\n                    <p className=\"text-muted\">Track your journey to your first home</p>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\" htmlFor=\"username\">Username</label>\r\n                        <input\r\n                            id=\"username\"\r\n                            type=\"text\"\r\n                            className=\"form-input\"\r\n                            value={username}\r\n                            onChange={(e) => setUsername(e.target.value)}\r\n                            placeholder=\"user1 or user2\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\" htmlFor=\"password\">Password</label>\r\n                        <input\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            className=\"form-input\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            placeholder=\"Enter password\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div style={{ padding: 'var(--spacing-md)', background: '#fef2f2', border: '2px solid var(--error)', borderRadius: 'var(--radius-md)', color: 'var(--error)', marginBottom: 'var(--spacing-md)' }}>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button type=\"submit\" className=\"btn btn-primary\" style={{ width: '100%' }} disabled={loading}>\r\n                        {loading ? 'Logging in...' : 'Login'}\r\n                    </button>\r\n\r\n                    <div style={{ marginTop: 'var(--spacing-lg)', padding: 'var(--spacing-md)', background: 'var(--background)', borderRadius: 'var(--radius-md)', fontSize: '0.875rem' }}>\r\n                        <p style={{ margin: 0 }}><strong>Default credentials:</strong></p>\r\n                        <p style={{ margin: '0.5rem 0 0 0' }}>user1 / changeme123<br />user2 / changeme123</p>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAQe,SAAS,MAAM,EAAE,OAAO,EAAc;;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qOAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qOAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qOAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qOAAQ,EAAC;IAEvC,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,mBAAmB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU;gBAAS;YAC9C;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,SAAS,KAAK,KAAK,IAAI;gBACvB;YACJ;YAEA,QAAQ,KAAK,IAAI;QACrB,EAAE,OAAO,KAAK;YACV,SAAS;QACb,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,yPAAC;QAAI,WAAU;QAAO,OAAO;YAAE,SAAS;YAAQ,YAAY;YAAU,gBAAgB;YAAU,YAAY;QAAoD;kBAC5J,cAAA,yPAAC;YAAI,WAAU;YAAO,OAAO;gBAAE,OAAO;gBAAQ,UAAU;gBAAS,QAAQ;YAAoB;;8BACzF,yPAAC;oBAAI,WAAU;;sCACX,yPAAC;4BAAI,OAAO;gCAAE,UAAU;gCAAQ,cAAc;4BAAoB;sCAAG;;;;;;sCACrE,yPAAC;4BAAG,OAAO;gCAAE,cAAc;4BAAoB;sCAAG;;;;;;sCAClD,yPAAC;4BAAE,WAAU;sCAAa;;;;;;;;;;;;8BAG9B,yPAAC;oBAAK,UAAU;;sCACZ,yPAAC;4BAAI,WAAU;;8CACX,yPAAC;oCAAM,WAAU;oCAAa,SAAQ;8CAAW;;;;;;8CACjD,yPAAC;oCACG,IAAG;oCACH,MAAK;oCACL,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,aAAY;oCACZ,QAAQ;;;;;;;;;;;;sCAIhB,yPAAC;4BAAI,WAAU;;8CACX,yPAAC;oCAAM,WAAU;oCAAa,SAAQ;8CAAW;;;;;;8CACjD,yPAAC;oCACG,IAAG;oCACH,MAAK;oCACL,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,aAAY;oCACZ,QAAQ;;;;;;;;;;;;wBAIf,uBACG,yPAAC;4BAAI,OAAO;gCAAE,SAAS;gCAAqB,YAAY;gCAAW,QAAQ;gCAA0B,cAAc;gCAAoB,OAAO;gCAAgB,cAAc;4BAAoB;sCAC3L;;;;;;sCAIT,yPAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAkB,OAAO;gCAAE,OAAO;4BAAO;4BAAG,UAAU;sCACjF,UAAU,kBAAkB;;;;;;sCAGjC,yPAAC;4BAAI,OAAO;gCAAE,WAAW;gCAAqB,SAAS;gCAAqB,YAAY;gCAAqB,cAAc;gCAAoB,UAAU;4BAAW;;8CAChK,yPAAC;oCAAE,OAAO;wCAAE,QAAQ;oCAAE;8CAAG,cAAA,yPAAC;kDAAO;;;;;;;;;;;8CACjC,yPAAC;oCAAE,OAAO;wCAAE,QAAQ;oCAAe;;wCAAG;sDAAmB,yPAAC;;;;;wCAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvF;GAvFwB;KAAA"}},
    {"offset": {"line": 587, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/components/SpreadsheetView.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface Transaction {\r\n    id: number;\r\n    account_name: string;\r\n    pot_name: string;\r\n    user_name: string;\r\n    amount: number;\r\n    description: string;\r\n    transaction_date: string;\r\n}\r\n\r\nexport default function SpreadsheetView() {\r\n    const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchTransactions();\r\n    }, []);\r\n\r\n    const fetchTransactions = async () => {\r\n        try {\r\n            const res = await fetch('/api/transactions');\r\n            const data = await res.json();\r\n            setTransactions(data.transactions || []);\r\n        } catch (error) {\r\n            console.error('Error fetching transactions:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleExport = async () => {\r\n        try {\r\n            const res = await fetch('/api/export/csv');\r\n            const blob = await res.blob();\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `savings-tracker-${new Date().toISOString().split('T')[0]}.csv`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            window.URL.revokeObjectURL(url);\r\n            document.body.removeChild(a);\r\n        } catch (error) {\r\n            console.error('Export error:', error);\r\n            alert('Failed to export data');\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"skeleton\" style={{ height: '400px' }} />;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between items-center mb-lg\">\r\n                <h2>Transaction History</h2>\r\n                <button onClick={handleExport} className=\"btn btn-primary\">\r\n                    üìä Export to CSV\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"card\" style={{ overflowX: 'auto' }}>\r\n                {transactions.length === 0 ? (\r\n                    <p className=\"text-muted text-center\">No transactions yet</p>\r\n                ) : (\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ borderBottom: '2px solid var(--border)', textAlign: 'left' }}>\r\n                                <th style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>Date</th>\r\n                                <th style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>Pot</th>\r\n                                <th style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>Account</th>\r\n                                <th style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>Amount</th>\r\n                                <th style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>Description</th>\r\n                                <th style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>User</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {transactions.map((tx) => (\r\n                                <tr key={tx.id} style={{ borderBottom: '1px solid var(--border)' }}>\r\n                                    <td style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>\r\n                                        {new Date(tx.transaction_date).toLocaleDateString('en-GB')}\r\n                                    </td>\r\n                                    <td style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>{tx.pot_name}</td>\r\n                                    <td style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>{tx.account_name}</td>\r\n                                    <td style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }} className=\"currency\">\r\n                                        <span style={{ color: tx.amount >= 0 ? 'var(--success)' : 'var(--error)' }}>\r\n                                            {tx.amount >= 0 ? '+' : ''}¬£{Math.abs(tx.amount).toLocaleString('en-GB', { minimumFractionDigits: 2 })}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td style={{ padding: 'var(--spacing-md)' }}>{tx.description || '-'}</td>\r\n                                    <td style={{ padding: 'var(--spacing-md)', whiteSpace: 'nowrap' }}>{tx.user_name}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 902, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/components/TransactionForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface Account {\r\n    id: number;\r\n    pot_id: number;\r\n    account_name: string;\r\n    account_type: string;\r\n    current_balance: number;\r\n}\r\n\r\ninterface SavingsPot {\r\n    id: number;\r\n    name: string;\r\n}\r\n\r\ninterface TransactionFormProps {\r\n    onSuccess: () => void;\r\n    currentUser: { id: number; username: string; displayName: string };\r\n}\r\n\r\nexport default function TransactionForm({ onSuccess, currentUser }: TransactionFormProps) {\r\n    const [accounts, setAccounts] = useState<Account[]>([]);\r\n    const [pots, setPots] = useState<SavingsPot[]>([]);\r\n    const [selectedAccountId, setSelectedAccountId] = useState('');\r\n    const [amount, setAmount] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [transactionDate, setTransactionDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [isDeposit, setIsDeposit] = useState(true);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [accountsRes, potsRes] = await Promise.all([\r\n                fetch('/api/accounts'),\r\n                fetch('/api/pots')\r\n            ]);\r\n            const accountsData = await accountsRes.json();\r\n            const potsData = await potsRes.json();\r\n            setAccounts(accountsData.accounts || []);\r\n            setPots(potsData.pots || []);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            const finalAmount = isDeposit ? parseFloat(amount) : -parseFloat(amount);\r\n\r\n            const res = await fetch('/api/transactions', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    accountId: parseInt(selectedAccountId),\r\n                    userId: currentUser.id,\r\n                    amount: finalAmount,\r\n                    description,\r\n                    transactionDate\r\n                })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to create transaction');\r\n\r\n            // Reset form\r\n            setAmount('');\r\n            setDescription('');\r\n            setTransactionDate(new Date().toISOString().split('T')[0]);\r\n            onSuccess();\r\n        } catch (error) {\r\n            console.error('Error creating transaction:', error);\r\n            alert('Failed to create transaction');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"card\">\r\n            <h2 className=\"mb-lg\">Add Transaction</h2>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"form-label\" htmlFor=\"account\">Account</label>\r\n                <select\r\n                    id=\"account\"\r\n                    className=\"form-select\"\r\n                    value={selectedAccountId}\r\n                    onChange={(e) => setSelectedAccountId(e.target.value)}\r\n                    required\r\n                >\r\n                    <option value=\"\">Select an account</option>\r\n                    {pots.map((pot) => {\r\n                        const potAccounts = accounts.filter((a) => a.pot_id === pot.id);\r\n                        return potAccounts.length > 0 ? (\r\n                            <optgroup key={pot.id} label={pot.name}>\r\n                                {potAccounts.map((account) => (\r\n                                    <option key={account.id} value={account.id}>\r\n                                        {account.account_name} (¬£{account.current_balance.toLocaleString('en-GB')})\r\n                                    </option>\r\n                                ))}\r\n                            </optgroup>\r\n                        ) : null;\r\n                    })}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"form-label\">Transaction Type</label>\r\n                <div className=\"flex gap-md\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className={isDeposit ? 'btn btn-primary' : 'btn btn-secondary'}\r\n                        onClick={() => setIsDeposit(true)}\r\n                        style={{ flex: 1 }}\r\n                    >\r\n                        üí∞ Deposit\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        className={!isDeposit ? 'btn btn-primary' : 'btn btn-secondary'}\r\n                        onClick={() => setIsDeposit(false)}\r\n                        style={{ flex: 1 }}\r\n                    >\r\n                        üí∏ Withdrawal\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"form-label\" htmlFor=\"amount\">Amount (¬£)</label>\r\n                <input\r\n                    id=\"amount\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    min=\"0.01\"\r\n                    className=\"form-input\"\r\n                    value={amount}\r\n                    onChange={(e) => setAmount(e.target.value)}\r\n                    placeholder=\"0.00\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"form-label\" htmlFor=\"date\">Date</label>\r\n                <input\r\n                    id=\"date\"\r\n                    type=\"date\"\r\n                    className=\"form-input\"\r\n                    value={transactionDate}\r\n                    onChange={(e) => setTransactionDate(e.target.value)}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"form-label\" htmlFor=\"description\">Description (Optional)</label>\r\n                <input\r\n                    id=\"description\"\r\n                    type=\"text\"\r\n                    className=\"form-input\"\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    placeholder=\"e.g., Monthly savings\"\r\n                />\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-primary\" style={{ width: '100%' }} disabled={loading}>\r\n                {loading ? 'Adding...' : `Add ${isDeposit ? 'Deposit' : 'Withdrawal'}`}\r\n            </button>\r\n        </form>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/components/ManagePots.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface SavingsPot {\r\n    id: number;\r\n    name: string;\r\n    goal_amount: number | null;\r\n    color: string;\r\n    icon: string;\r\n}\r\n\r\ninterface ManagePotsProps {\r\n    onUpdate: () => void;\r\n}\r\n\r\nexport default function ManagePots({ onUpdate }: ManagePotsProps) {\r\n    const [pots, setPots] = useState<SavingsPot[]>([]);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        goalAmount: '',\r\n        color: '#059669',\r\n        icon: 'piggy-bank'\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchPots();\r\n    }, []);\r\n\r\n    const fetchPots = async () => {\r\n        try {\r\n            const res = await fetch('/api/pots');\r\n            const data = await res.json();\r\n            setPots(data.pots || []);\r\n        } catch (error) {\r\n            console.error('Error fetching pots:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const res = await fetch('/api/pots', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    name: formData.name,\r\n                    goalAmount: formData.goalAmount ? parseFloat(formData.goalAmount) : null,\r\n                    color: formData.color,\r\n                    icon: formData.icon,\r\n                    priority: 0\r\n                })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to create pot');\r\n\r\n            setFormData({ name: '', goalAmount: '', color: '#059669', icon: 'piggy-bank' });\r\n            setShowForm(false);\r\n            fetchPots();\r\n            onUpdate();\r\n        } catch (error) {\r\n            console.error('Error creating pot:', error);\r\n            alert('Failed to create savings pot');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (!confirm('Are you sure? This will delete all associated accounts and transactions.')) return;\r\n\r\n        try {\r\n            const res = await fetch(`/api/pots/${id}`, { method: 'DELETE' });\r\n            if (!res.ok) throw new Error('Failed to delete pot');\r\n\r\n            fetchPots();\r\n            onUpdate();\r\n        } catch (error) {\r\n            console.error('Error deleting pot:', error);\r\n            alert('Failed to delete pot');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between items-center mb-lg\">\r\n                <h2>Savings Pots</h2>\r\n                <button onClick={() => setShowForm(!showForm)} className=\"btn btn-primary\">\r\n                    {showForm ? 'Cancel' : '+ Add Pot'}\r\n                </button>\r\n            </div>\r\n\r\n            {showForm && (\r\n                <form onSubmit={handleSubmit} className=\"card mb-lg\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Pot Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-input\"\r\n                            value={formData.name}\r\n                            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                            placeholder=\"e.g., House Deposit\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Goal Amount (¬£, Optional)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            className=\"form-input\"\r\n                            value={formData.goalAmount}\r\n                            onChange={(e) => setFormData({ ...formData, goalAmount: e.target.value })}\r\n                            placeholder=\"e.g., 50000\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Icon</label>\r\n                        <select\r\n                            className=\"form-select\"\r\n                            value={formData.icon}\r\n                            onChange={(e) => setFormData({ ...formData, icon: e.target.value })}\r\n                        >\r\n                            <option value=\"house\">üè° House</option>\r\n                            <option value=\"piggy-bank\">üê∑ Piggy Bank</option>\r\n                            <option value=\"car\">üöó Car</option>\r\n                            <option value=\"vacation\">üèñÔ∏è Vacation</option>\r\n                            <option value=\"emergency\">üö® Emergency</option>\r\n                            <option value=\"wedding\">üíç Wedding</option>\r\n                            <option value=\"education\">üéì Education</option>\r\n                            <option value=\"savings\">üí∞ Savings</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Color</label>\r\n                        <input\r\n                            type=\"color\"\r\n                            className=\"form-input\"\r\n                            value={formData.color}\r\n                            onChange={(e) => setFormData({ ...formData, color: e.target.value })}\r\n                        />\r\n                    </div>\r\n\r\n                    <button type=\"submit\" className=\"btn btn-primary\" style={{ width: '100%' }}>\r\n                        Create Pot\r\n                    </button>\r\n                </form>\r\n            )}\r\n\r\n            <div className=\"grid\" style={{ gap: 'var(--spacing-md)' }}>\r\n                {pots.map((pot) => (\r\n                    <div key={pot.id} className=\"card\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <div className=\"flex items-center gap-md\">\r\n                                <div style={{ fontSize: '2rem' }}>\r\n                                    {pot.icon === 'house' && 'üè°'}\r\n                                    {pot.icon === 'piggy-bank' && 'üê∑'}\r\n                                    {pot.icon === 'car' && 'üöó'}\r\n                                    {pot.icon === 'vacation' && 'üèñÔ∏è'}\r\n                                    {pot.icon === 'emergency' && 'üö®'}\r\n                                    {pot.icon === 'wedding' && 'üíç'}\r\n                                    {pot.icon === 'education' && 'üéì'}\r\n                                    {pot.icon === 'savings' && 'üí∞'}\r\n                                </div>\r\n                                <div>\r\n                                    <h4 style={{ marginBottom: '0.25rem' }}>{pot.name}</h4>\r\n                                    {pot.goal_amount && (\r\n                                        <p className=\"text-muted\" style={{ fontSize: '0.875rem', margin: 0 }}>\r\n                                            Goal: ¬£{pot.goal_amount.toLocaleString('en-GB')}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => handleDelete(pot.id)}\r\n                                className=\"btn btn-secondary\"\r\n                                style={{ padding: '0.5rem' }}\r\n                            >\r\n                                üóëÔ∏è\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1656, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/components/ManageAccounts.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface Account {\r\n    id: number;\r\n    pot_id: number;\r\n    pot_name: string;\r\n    account_name: string;\r\n    account_type: string;\r\n    current_balance: number;\r\n}\r\n\r\ninterface SavingsPot {\r\n    id: number;\r\n    name: string;\r\n}\r\n\r\ninterface ManageAccountsProps {\r\n    onUpdate: () => void;\r\n}\r\n\r\nexport default function ManageAccounts({ onUpdate }: ManageAccountsProps) {\r\n    const [accounts, setAccounts] = useState<Account[]>([]);\r\n    const [pots, setPots] = useState<SavingsPot[]>([]);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        potId: '',\r\n        accountName: '',\r\n        accountType: 'savings',\r\n        currentBalance: ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [accountsRes, potsRes] = await Promise.all([\r\n                fetch('/api/accounts'),\r\n                fetch('/api/pots')\r\n            ]);\r\n            const accountsData = await accountsRes.json();\r\n            const potsData = await potsRes.json();\r\n            setAccounts(accountsData.accounts || []);\r\n            setPots(potsData.pots || []);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const res = await fetch('/api/accounts', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    potId: parseInt(formData.potId),\r\n                    accountName: formData.accountName,\r\n                    accountType: formData.accountType,\r\n                    currentBalance: parseFloat(formData.currentBalance) || 0\r\n                })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to create account');\r\n\r\n            setFormData({ potId: '', accountName: '', accountType: 'savings', currentBalance: '' });\r\n            setShowForm(false);\r\n            fetchData();\r\n            onUpdate();\r\n        } catch (error) {\r\n            console.error('Error creating account:', error);\r\n            alert('Failed to create account');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (!confirm('Are you sure? This will delete all associated transactions.')) return;\r\n\r\n        try {\r\n            const res = await fetch(`/api/accounts/${id}`, { method: 'DELETE' });\r\n            if (!res.ok) throw new Error('Failed to delete account');\r\n\r\n            fetchData();\r\n            onUpdate();\r\n        } catch (error) {\r\n            console.error('Error deleting account:', error);\r\n            alert('Failed to delete account');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between items-center mb-lg\">\r\n                <h2>Accounts</h2>\r\n                <button onClick={() => setShowForm(!showForm)} className=\"btn btn-primary\">\r\n                    {showForm ? 'Cancel' : '+ Add Account'}\r\n                </button>\r\n            </div>\r\n\r\n            {showForm && (\r\n                <form onSubmit={handleSubmit} className=\"card mb-lg\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Savings Pot</label>\r\n                        <select\r\n                            className=\"form-select\"\r\n                            value={formData.potId}\r\n                            onChange={(e) => setFormData({ ...formData, potId: e.target.value })}\r\n                            required\r\n                        >\r\n                            <option value=\"\">Select a pot</option>\r\n                            {pots.map((pot) => (\r\n                                <option key={pot.id} value={pot.id}>\r\n                                    {pot.name}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Account Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-input\"\r\n                            value={formData.accountName}\r\n                            onChange={(e) => setFormData({ ...formData, accountName: e.target.value })}\r\n                            placeholder=\"e.g., HSBC ISA\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Account Type</label>\r\n                        <select\r\n                            className=\"form-select\"\r\n                            value={formData.accountType}\r\n                            onChange={(e) => setFormData({ ...formData, accountType: e.target.value })}\r\n                        >\r\n                            <option value=\"savings\">Savings Account</option>\r\n                            <option value=\"isa\">ISA</option>\r\n                            <option value=\"current\">Current Account</option>\r\n                            <option value=\"investment\">Investment Account</option>\r\n                            <option value=\"other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label className=\"form-label\">Current Balance (¬£)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            className=\"form-input\"\r\n                            value={formData.currentBalance}\r\n                            onChange={(e) => setFormData({ ...formData, currentBalance: e.target.value })}\r\n                            placeholder=\"0.00\"\r\n                        />\r\n                    </div>\r\n\r\n                    <button type=\"submit\" className=\"btn btn-primary\" style={{ width: '100%' }}>\r\n                        Create Account\r\n                    </button>\r\n                </form>\r\n            )}\r\n\r\n            <div className=\"grid\" style={{ gap: 'var(--spacing-md)' }}>\r\n                {accounts.map((account) => (\r\n                    <div key={account.id} className=\"card\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <div>\r\n                                <h4 style={{ marginBottom: '0.25rem' }}>{account.account_name}</h4>\r\n                                <p className=\"text-muted\" style={{ fontSize: '0.875rem', margin: '0 0 0.5rem 0' }}>\r\n                                    {account.pot_name} ‚Ä¢ {account.account_type}\r\n                                </p>\r\n                                <p className=\"currency\" style={{ fontSize: '1.25rem', fontWeight: 600, margin: 0 }}>\r\n                                    ¬£{account.current_balance.toLocaleString('en-GB', { minimumFractionDigits: 2 })}\r\n                                </p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => handleDelete(account.id)}\r\n                                className=\"btn btn-secondary\"\r\n                                style={{ padding: '0.5rem' }}\r\n                            >\r\n                                üóëÔ∏è\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2080, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/G/.gemini/antigravity/scratch/savings-tracker/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Dashboard from '@/components/Dashboard';\nimport Login from '@/components/Login';\nimport SpreadsheetView from '@/components/SpreadsheetView';\nimport TransactionForm from '@/components/TransactionForm';\nimport ManagePots from '@/components/ManagePots';\nimport ManageAccounts from '@/components/ManageAccounts';\n\nexport default function Home() {\n  const [user, setUser] = useState<any>(null);\n  const [currentView, setCurrentView] = useState<'dashboard' | 'transactions' | 'manage'>('dashboard');\n  const [loading, setLoading] = useState(true);\n  const [showTransactionForm, setShowTransactionForm] = useState(false);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  useEffect(() => {\n    checkSession();\n  }, []);\n\n  const checkSession = async () => {\n    try {\n      const res = await fetch('/api/auth/session');\n      if (res.ok) {\n        const data = await res.json();\n        if (data.authenticated) {\n          setUser(data.user);\n        }\n      }\n    } catch (error) {\n      console.error('Session check error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    await fetch('/api/auth/session', { method: 'POST' });\n    setUser(null);\n  };\n\n  const handleTransactionSuccess = () => {\n    setShowTransactionForm(false);\n    setRefreshKey((prev) => prev + 1);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"page\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <div className=\"skeleton\" style={{ width: '300px', height: '400px' }} />\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Login onLogin={setUser} />;\n  }\n\n  return (\n    <div className=\"page\">\n      {/* Header */}\n      <div className=\"container\">\n        <header style={{ padding: 'var(--spacing-lg) 0', borderBottom: '2px solid var(--border)', marginBottom: 'var(--spacing-xl)' }}>\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <h1 style={{ marginBottom: 'var(--spacing-xs)' }}>üí∞ Savings Tracker</h1>\n              <p className=\"text-muted\">Welcome back, {user.displayName}!</p>\n            </div>\n            <button onClick={handleLogout} className=\"btn btn-secondary\">\n              Logout\n            </button>\n          </div>\n        </header>\n\n        {/* Navigation */}\n        <nav className=\"mb-xl\">\n          <div className=\"flex gap-md\" style={{ overflowX: 'auto' }}>\n            <button\n              onClick={() => setCurrentView('dashboard')}\n              className={currentView === 'dashboard' ? 'btn btn-primary' : 'btn btn-secondary'}\n            >\n              üìä Dashboard\n            </button>\n            <button\n              onClick={() => setCurrentView('transactions')}\n              className={currentView === 'transactions' ? 'btn btn-primary' : 'btn btn-secondary'}\n            >\n              üìã Transactions\n            </button>\n            <button\n              onClick={() => setCurrentView('manage')}\n              className={currentView === 'manage' ? 'btn btn-primary' : 'btn btn-secondary'}\n            >\n              ‚öôÔ∏è Manage\n            </button>\n          </div>\n        </nav>\n\n        {/* Main content */}\n        <main>\n          {currentView === 'dashboard' && <Dashboard key={refreshKey} />}\n          {currentView === 'transactions' && <SpreadsheetView key={refreshKey} />}\n          {currentView === 'manage' && (\n            <div className=\"grid grid-2\">\n              <ManagePots onUpdate={() => setRefreshKey((prev) => prev + 1)} />\n              <ManageAccounts onUpdate={() => setRefreshKey((prev) => prev + 1)} />\n            </div>\n          )}\n        </main>\n      </div>\n\n      {/* Floating Action Button */}\n      {!showTransactionForm && (\n        <button\n          className=\"fab\"\n          onClick={() => setShowTransactionForm(true)}\n          title=\"Add Transaction\"\n        >\n          +\n        </button>\n      )}\n\n      {/* Transaction Form Modal */}\n      {showTransactionForm && (\n        <div\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            background: 'rgba(0, 0, 0, 0.5)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: 'var(--spacing-md)',\n            zIndex: 1000,\n            overflowY: 'auto'\n          }}\n          onClick={(e) => {\n            if (e.target === e.currentTarget) setShowTransactionForm(false);\n          }}\n        >\n          <div style={{ maxWidth: '500px', width: '100%', position: 'relative' }}>\n            <button\n              onClick={() => setShowTransactionForm(false)}\n              style={{\n                position: 'absolute',\n                top: '-12px',\n                right: '-12px',\n                width: '40px',\n                height: '40px',\n                borderRadius: 'var(--radius-full)',\n                background: 'var(--error)',\n                color: 'white',\n                border: 'none',\n                fontSize: '1.5rem',\n                cursor: 'pointer',\n                zIndex: 1001\n              }}\n            >\n              √ó\n            </button>\n            <TransactionForm onSuccess={handleTransactionSuccess} currentUser={user} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}