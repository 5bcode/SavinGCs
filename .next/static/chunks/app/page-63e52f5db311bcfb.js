(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9813:function(e,t,a){Promise.resolve().then(a.bind(a,5059))},5059:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),n=a(2265),r=a(8059),i=a.n(r);function o(e){var t;let{pots:a,accounts:r,onUpdate:o}=e,[l,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),[g,v]=(0,n.useState)(""),[j,f]=(0,n.useState)(!1),[y,b]=(0,n.useState)(""),N=a.find(e=>"Unallocated"===e.name),S=d?r.filter(e=>e.pot_id===parseInt(d)&&e.current_balance>0):[],k=a.filter(e=>String(e.id)!==d),w=async e=>{e.preventDefault(),b(""),f(!0);try{let e=parseFloat(g.replace(/,/g,""));if(isNaN(e)||e<=0)throw Error("Invalid amount");let t=await fetch("/api/allocate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceAccountId:parseInt(x),targetPotId:parseInt(p),amount:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Allocation failed")}v(""),c(!1),o()}catch(e){b(e.message)}finally{f(!1)}},C=x&&(null===(t=r.find(e=>e.id===parseInt(x)))||void 0===t?void 0:t.current_balance)||0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{style:{width:"100%"},onClick:()=>{c(!0),!d&&N&&m(String(N.id))},className:"jsx-99b2e0693884c06 btn btn-secondary",children:[(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-99b2e0693884c06",children:[(0,s.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19",className:"jsx-99b2e0693884c06"}),(0,s.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12",className:"jsx-99b2e0693884c06"})]}),"Transfer / Allocate"]}),l&&(0,s.jsx)("div",{className:"jsx-99b2e0693884c06 modal-overlay",children:(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 modal card",children:[(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 modal-header flex justify-between items-center mb-md",children:[(0,s.jsx)("h3",{className:"jsx-99b2e0693884c06 text-xl font-bold",children:"Allocate Funds"}),(0,s.jsx)("button",{onClick:()=>c(!1),className:"jsx-99b2e0693884c06 icon-btn",children:(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"jsx-99b2e0693884c06",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18",className:"jsx-99b2e0693884c06"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18",className:"jsx-99b2e0693884c06"})]})})]}),(0,s.jsxs)("form",{onSubmit:w,className:"jsx-99b2e0693884c06 stack gap-md",children:[y&&(0,s.jsx)("div",{className:"jsx-99b2e0693884c06 p-sm bg-red-100 text-red-700 rounded text-sm",children:y}),(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 form-group",children:[(0,s.jsx)("label",{className:"jsx-99b2e0693884c06 form-label",children:"From Pot"}),(0,s.jsxs)("select",{value:d,onChange:e=>{m(e.target.value),h("")},required:!0,className:"jsx-99b2e0693884c06 form-select",children:[(0,s.jsx)("option",{value:"",className:"jsx-99b2e0693884c06",children:"Select source pot..."}),a.map(e=>(0,s.jsx)("option",{value:e.id,className:"jsx-99b2e0693884c06",children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 form-group",children:[(0,s.jsx)("label",{className:"jsx-99b2e0693884c06 form-label",children:"From Account"}),(0,s.jsxs)("select",{value:x,onChange:e=>h(e.target.value),required:!0,disabled:!d,className:"jsx-99b2e0693884c06 form-select",children:[(0,s.jsx)("option",{value:"",className:"jsx-99b2e0693884c06",children:"Select source account..."}),S.map(e=>(0,s.jsxs)("option",{value:e.id,style:{color:"Gary"===e.owner?"#3b82f6":"Catherine"===e.owner?"#ec4899":"inherit",fontWeight:"bold"},className:"jsx-99b2e0693884c06",children:[e.account_name," (",e.owner,") - \xa3",e.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})]},e.id))]})]}),(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 form-group",children:[(0,s.jsx)("label",{className:"jsx-99b2e0693884c06 form-label",children:"To Pot"}),(0,s.jsxs)("select",{value:p,onChange:e=>u(e.target.value),required:!0,className:"jsx-99b2e0693884c06 form-select",children:[(0,s.jsx)("option",{value:"",className:"jsx-99b2e0693884c06",children:"Select target pot..."}),k.map(e=>(0,s.jsx)("option",{value:e.id,className:"jsx-99b2e0693884c06",children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 form-group",children:[(0,s.jsx)("label",{className:"jsx-99b2e0693884c06 form-label",children:"Amount (\xa3)"}),(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 relative",children:[(0,s.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),onFocus:e=>{v(e.target.value.replace(/,/g,""))},onBlur:e=>{let t=e.target.value.replace(/,/g,"");if(t){let e=parseFloat(t);isNaN(e)||v(e.toLocaleString("en-GB",{minimumFractionDigits:2}))}},placeholder:"0.00",required:!0,style:{paddingRight:"60px"},className:"jsx-99b2e0693884c06 form-input"}),C>0&&(0,s.jsx)("button",{type:"button",onClick:()=>v(C.toLocaleString("en-GB",{minimumFractionDigits:2})),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",color:"var(--teal-mid)",background:"rgba(20, 184, 166, 0.1)",border:"none",padding:"4px 8px",borderRadius:"var(--r-sm)",cursor:"pointer",fontWeight:700,fontSize:"0.75rem",zIndex:5},className:"jsx-99b2e0693884c06 absolute right-2 top-1/2 -translate-y-1/2 text-xs font-bold text-teal-500 hover:text-teal-400 px-2 py-1 rounded bg-teal-500/10 hover:bg-teal-500/20 transition-colors",children:"MAX"})]}),C>0&&(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"4px"},className:"jsx-99b2e0693884c06 text-xs text-gray-500 mt-1 text-right",children:["Max: \xa3",C.toLocaleString("en-GB",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"jsx-99b2e0693884c06 flex gap-sm mt-md",children:[(0,s.jsx)("button",{type:"button",onClick:()=>c(!1),className:"jsx-99b2e0693884c06 btn btn-secondary flex-1",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:j,className:"jsx-99b2e0693884c06 btn btn-primary flex-1",children:j?"Allocating...":"Confirm Allocation"})]})]})]})}),(0,s.jsx)(i(),{id:"99b2e0693884c06",children:".modal-overlay.jsx-99b2e0693884c06{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal.jsx-99b2e0693884c06{width:100%;max-width:400px;max-height:90vh;overflow-y:auto;-webkit-box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);-moz-box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)}"})]})}function l(e){let{onUpdateBalance:t,onAccountClick:a}=e,[r,i]=(0,n.useState)([]),[l,x]=(0,n.useState)([]),[h,p]=(0,n.useState)(!0);(0,n.useEffect)(()=>{u()},[]);let u=async()=>{try{let[e,t]=await Promise.all([fetch("/api/pots"),fetch("/api/accounts")]),a=await e.json(),s=await t.json();i(a.pots||[]),x(s.accounts||[])}catch(e){console.error("Error fetching data:",e)}finally{p(!1)}},g=r.reduce((e,t)=>e+(t.total_balance||0),0),v=r.reduce((e,t)=>e+(t.goal_amount||0),0),j=v>0?g/v*100:0;return h?(0,s.jsxs)("div",{className:"stack",children:[(0,s.jsx)("div",{className:"skeleton",style:{height:"220px"}}),(0,s.jsx)("div",{className:"skeleton",style:{height:"100px"}}),(0,s.jsx)("div",{className:"skeleton",style:{height:"80px"}})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{textAlign:"center",padding:"var(--sp-lg) 0 var(--sp-md)"},children:[(0,s.jsx)("div",{className:"balance-label",children:"Total Net Worth"}),(0,s.jsxs)("div",{className:"balance-amount",children:["\xa3",g.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})]}),v>0&&(0,s.jsxs)("div",{style:{fontSize:"0.8rem",color:"var(--text-tertiary)",marginTop:"6px"},children:[Math.min(j,100).toFixed(1),"% of \xa3",v.toLocaleString("en-GB")," goal"]})]}),v>0&&(0,s.jsxs)("div",{className:"credit-card mb-lg",style:{position:"relative"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--sp-xl)",position:"relative",zIndex:1},children:[(0,s.jsx)(m,{percentage:Math.min(j,100),size:96,strokeWidth:7,children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontFamily:"var(--font-mono)",fontSize:"1rem",fontWeight:700,color:"white",lineHeight:1},children:[Math.min(j,100).toFixed(0),"%"]}),(0,s.jsx)("div",{style:{fontSize:"0.55rem",color:"rgba(255,255,255,0.6)",marginTop:"2px"},children:"saved"})]})}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:600,opacity:.7,letterSpacing:"0.1em",textTransform:"uppercase",marginBottom:"4px"},children:"Savings Progress"}),(0,s.jsxs)("div",{style:{fontFamily:"var(--font-mono)",fontSize:"1.4rem",fontWeight:700,color:"white"},children:["\xa3",g.toLocaleString("en-GB",{minimumFractionDigits:2})]}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",opacity:.6,marginTop:"4px"},children:["\xa3",(v-g>0?v-g:0).toLocaleString("en-GB")," remaining"]})]})]}),(0,s.jsx)("div",{className:"wave-decoration",children:(0,s.jsxs)("svg",{viewBox:"0 0 400 80",fill:"none",preserveAspectRatio:"none",children:[(0,s.jsx)("path",{d:"M0 40 Q50 10 100 35 T200 30 T300 40 T400 25 L400 80 L0 80Z",fill:"rgba(13,148,136,0.3)"}),(0,s.jsx)("path",{d:"M0 50 Q60 25 120 45 T240 35 T360 50 T400 40 L400 80 L0 80Z",fill:"rgba(13,148,136,0.15)"})]})})]}),(0,s.jsxs)("div",{className:"flex gap-md mb-lg",children:[(0,s.jsxs)("button",{className:"btn btn-primary flex-1",onClick:t,children:[(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M18 7c0-5.333-8-5.333-8 0"}),(0,s.jsx)("path",{d:"M10 7v14"}),(0,s.jsx)("path",{d:"M6 21h12"}),(0,s.jsx)("path",{d:"M6 13h10"})]}),"Update Balances"]}),(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsx)(o,{pots:r,accounts:l,onUpdate:t})})]}),(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"Savings Pots"}),(0,s.jsxs)("div",{className:"section-link",children:[r.length," pot",1!==r.length?"s":""]})]}),0===r.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"\uD83C\uDFE1"}),(0,s.jsxs)("div",{className:"empty-state-text",children:["No savings pots yet.",(0,s.jsx)("br",{}),"Go to Settings to create your first one!"]})]}):(0,s.jsx)("div",{className:"stack mb-xl",children:r.map(e=>{let t=l.filter(t=>t.pot_id===e.id);return(0,s.jsx)(c,{pot:e,accounts:t,onAccountClick:a},e.id)})}),l.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"All Accounts"}),(0,s.jsxs)("div",{className:"section-link",children:[l.length," account",1!==l.length?"s":""]})]}),(0,s.jsx)("div",{className:"stack",style:{gap:"var(--sp-sm)"},children:l.map(e=>(0,s.jsx)(d,{account:e,onClick:()=>a(e.id)},e.id))})]})]})}function c(e){let{pot:t,accounts:a,onAccountClick:n}=e,r=Math.min(t.goal_amount?t.total_balance/t.goal_amount*100:0,100),i=t.goal_amount&&t.total_balance>=t.goal_amount;return(0,s.jsxs)("div",{className:"card",style:{padding:"var(--sp-lg)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-md",children:[(0,s.jsx)("div",{className:"pot-icon",style:{background:"".concat(t.color,"25")},children:{"piggy-bank":"\uD83D\uDC37",house:"\uD83C\uDFE1",car:"\uD83D\uDE97",vacation:"\uD83C\uDFD6️",emergency:"\uD83D\uDEA8",wedding:"\uD83D\uDC8D",education:"\uD83C\uDF93",savings:"\uD83D\uDCB0",tent:"⛺"}[t.icon]||"\uD83D\uDCB0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:700,fontSize:"1rem"},children:t.name}),t.goal_amount&&(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"2px"},children:["Goal: \xa3",t.goal_amount.toLocaleString("en-GB")]})]})]}),(0,s.jsxs)("div",{style:{textAlign:"right"},children:[(0,s.jsxs)("div",{style:{fontFamily:"var(--font-mono)",fontWeight:700,fontSize:"1.1rem",color:"var(--text-primary)"},children:["\xa3",t.total_balance.toLocaleString("en-GB",{minimumFractionDigits:2})]}),i&&(0,s.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--success)",fontWeight:600,marginTop:"2px"},children:"✓ Goal reached"})]})]}),t.goal_amount&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"progress-track",style:{height:"8px",marginTop:0,marginBottom:"6px"},children:(0,s.jsx)("div",{className:"progress-fill".concat(i?"":" purple"),style:{width:"".concat(r,"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between",style:{fontSize:"0.7rem",color:"var(--text-tertiary)"},children:[(0,s.jsxs)("span",{children:[r.toFixed(1),"% complete"]}),(0,s.jsxs)("span",{children:["\xa3",Math.max(0,(t.goal_amount||0)-t.total_balance).toLocaleString("en-GB")," to go"]})]})]}),a.length>0&&(0,s.jsx)("div",{style:{marginTop:"var(--sp-md)",paddingTop:"var(--sp-md)",borderTop:"1px solid var(--border)"},children:a.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center",style:{padding:"6px 0",cursor:"pointer"},onClick:()=>n(e.id),children:[(0,s.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,s.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:t.color,flexShrink:0}}),(0,s.jsx)("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:e.account_name}),(0,s.jsxs)("span",{style:{fontSize:"0.65rem",color:"var(--text-tertiary)",padding:"1px 6px",background:"var(--bg-secondary)",borderRadius:"var(--r-sm)"},children:[e.account_type.toUpperCase()," \xb7",(0,s.jsx)("span",{style:{color:"Gary"===e.owner?"#3b82f6":"Catherine"===e.owner?"#ec4899":"inherit",fontWeight:600,marginLeft:"4px"},children:e.owner||"Joint"})]})]}),(0,s.jsxs)("span",{style:{fontFamily:"var(--font-mono)",fontSize:"0.85rem",fontWeight:600,color:"var(--text-primary)"},children:["\xa3",e.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})]})]},e.id))})]})}function d(e){let{account:t,onClick:a}=e;return(0,s.jsxs)("div",{className:"pot-item",onClick:a,children:[(0,s.jsx)("div",{className:"pot-icon",style:{background:"linear-gradient(135deg, ".concat(t.pot_color||"var(--purple-start)","30, ").concat(t.pot_color||"var(--purple-start)","10)"),fontSize:"1rem"},children:(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:t.pot_color||"var(--purple-mid)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,s.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]})}),(0,s.jsxs)("div",{className:"pot-info",children:[(0,s.jsx)("div",{className:"pot-name",children:t.account_name}),(0,s.jsxs)("div",{className:"pot-meta",children:[t.pot_name," \xb7 ",t.account_type," \xb7",(0,s.jsx)("span",{style:{color:"Gary"===t.owner?"#3b82f6":"Catherine"===t.owner?"#ec4899":"inherit",fontWeight:600,marginLeft:"4px"},children:t.owner||"Joint"})]})]}),(0,s.jsxs)("div",{className:"pot-amount",children:["\xa3",t.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})]})]})}function m(e){let{percentage:t,size:a=96,strokeWidth:n=7,children:r}=e,i=(a-n)/2,o=2*i*Math.PI;return(0,s.jsxs)("div",{className:"ring-container",style:{width:a,height:a},children:[(0,s.jsxs)("svg",{width:a,height:a,viewBox:"0 0 ".concat(a," ").concat(a),children:[(0,s.jsx)("circle",{className:"ring-bg",cx:a/2,cy:a/2,r:i}),(0,s.jsx)("circle",{className:"ring-fill",cx:a/2,cy:a/2,r:i,stroke:"url(#ringGrad)",strokeDasharray:o,strokeDashoffset:o-t/100*o}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"ringGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"var(--purple-start)"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"var(--teal-end)"})]})})]}),(0,s.jsx)("div",{className:"ring-text",children:r})]})}function x(e){let{onLogin:t}=e,[a,r]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!0),[m,x]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),u=async e=>{e.preventDefault(),x(""),p(!0);try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:o,rememberMe:c})}),s=await e.json();if(!e.ok){x(s.error||"Login failed");return}t(s.user)}catch(e){x("An error occurred. Please try again.")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"jsx-37a81b79a982207d login-page",children:[(0,s.jsxs)("div",{className:"jsx-37a81b79a982207d login-card",children:[(0,s.jsxs)("div",{className:"jsx-37a81b79a982207d login-brand",children:[(0,s.jsx)("div",{className:"jsx-37a81b79a982207d login-logo",children:"\uD83C\uDFE1"}),(0,s.jsx)("h1",{className:"jsx-37a81b79a982207d login-title",children:"SavinGCs"}),(0,s.jsx)("p",{className:"jsx-37a81b79a982207d login-subtitle",children:"Track your savings together"})]}),(0,s.jsxs)("form",{onSubmit:u,className:"jsx-37a81b79a982207d card-glass",children:[(0,s.jsxs)("div",{className:"jsx-37a81b79a982207d form-group",children:[(0,s.jsx)("label",{htmlFor:"username",className:"jsx-37a81b79a982207d form-label",children:"Username"}),(0,s.jsx)("input",{id:"username",type:"text",value:a,onChange:e=>r(e.target.value),placeholder:"Enter username",required:!0,autoComplete:"username",className:"jsx-37a81b79a982207d form-input"})]}),(0,s.jsxs)("div",{className:"jsx-37a81b79a982207d form-group",children:[(0,s.jsx)("label",{htmlFor:"password",className:"jsx-37a81b79a982207d form-label",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",value:o,onChange:e=>l(e.target.value),placeholder:"Enter password",required:!0,autoComplete:"current-password",className:"jsx-37a81b79a982207d form-input"})]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"var(--sp-sm)",cursor:"pointer",marginBottom:"var(--sp-lg)",WebkitTapHighlightColor:"transparent"},className:"jsx-37a81b79a982207d",children:[(0,s.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),style:{width:"18px",height:"18px",accentColor:"var(--purple-start)",cursor:"pointer"},className:"jsx-37a81b79a982207d"}),(0,s.jsx)("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},className:"jsx-37a81b79a982207d",children:"Remember me"})]}),m&&(0,s.jsx)("div",{className:"jsx-37a81b79a982207d error-badge",children:m}),(0,s.jsx)("button",{type:"submit",style:{width:"100%"},disabled:h,className:"jsx-37a81b79a982207d btn btn-primary",children:h?(0,s.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"8px"},className:"jsx-37a81b79a982207d",children:[(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",style:{animation:"spin 1s linear infinite"},className:"jsx-37a81b79a982207d",children:(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeDasharray:"60 30",className:"jsx-37a81b79a982207d"})}),"Signing in..."]}):"Sign In"})]})]}),(0,s.jsx)(i(),{id:"37a81b79a982207d",children:"@-webkit-keyframes spin{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}function h(e){let{transactions:t}=e,[a,r]=(0,n.useState)(null),i=(0,n.useMemo)(()=>{if(!t.length)return[];let e=[...t].sort((e,t)=>new Date(e.transaction_date).getTime()-new Date(t.transaction_date).getTime()),a=new Map,s=0;return e.forEach(e=>{s+=e.amount,a.set(e.transaction_date,s)}),Array.from(a.entries()).map(e=>{let[t,a]=e;return{date:t,value:a,timestamp:new Date(t).getTime()}})},[t]);if(i.length<2)return null;let o=Math.min(...i.map(e=>e.timestamp)),l=Math.max(...i.map(e=>e.timestamp))-o||1,c=Math.min(0,...i.map(e=>e.value)),d=1.05*Math.max(...i.map(e=>e.value))-c||1,m=e=>40+(e-o)/l*720,x=e=>260-(e-c)/d*220,h=i.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(m(e.timestamp)," ").concat(x(e.value))).join(" "),p="".concat(h," L ").concat(m(i[i.length-1].timestamp)," ").concat(260," L ").concat(m(i[0].timestamp)," ").concat(260," Z");return(0,s.jsxs)("div",{className:"card mb-xl overflow-hidden",style:{padding:"0"},children:[(0,s.jsx)("div",{style:{padding:"var(--sp-md) var(--sp-lg)",borderBottom:"1px solid var(--border)"},children:(0,s.jsx)("div",{style:{fontWeight:700,fontSize:"0.9rem"},children:"Net Worth Over Time"})}),(0,s.jsxs)("div",{style:{position:"relative",height:"300px",width:"100%"},children:[(0,s.jsxs)("svg",{viewBox:"0 0 ".concat(800," ").concat(300),style:{width:"100%",height:"100%",display:"block"},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"chartFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"var(--purple-mid)",stopOpacity:"0.2"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"var(--purple-mid)",stopOpacity:"0"})]})}),[0,.25,.5,.75,1].map(e=>{let t=260-220*e;return(0,s.jsx)("line",{x1:40,y1:t,x2:760,y2:t,stroke:"var(--border)",strokeDasharray:"4 4"},e)}),(0,s.jsx)("path",{d:p,fill:"url(#chartFill)"}),(0,s.jsx)("path",{d:h,fill:"none",stroke:"var(--purple-mid)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),i.map((e,t)=>(0,s.jsx)("circle",{cx:m(e.timestamp),cy:x(e.value),r:"6",fill:"transparent",onMouseEnter:()=>r({x:m(e.timestamp),y:x(e.value),date:e.date,value:e.value}),onMouseLeave:()=>r(null),style:{cursor:"pointer"}},t)),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("circle",{cx:a.x,cy:a.y,r:"5",fill:"var(--bg-card)",stroke:"var(--purple-mid)",strokeWidth:"2"}),(0,s.jsx)("line",{x1:a.x,y1:a.y,x2:a.x,y2:260,stroke:"var(--text-tertiary)",strokeDasharray:"2 2"})]})]}),a&&(0,s.jsxs)("div",{style:{position:"absolute",left:a.x,top:a.y-10,transform:"translate(-50%, -100%)",background:"var(--bg-card)",border:"1px solid var(--border)",padding:"8px 12px",borderRadius:"var(--r-md)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",pointerEvents:"none",textAlign:"center",zIndex:10},children:[(0,s.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:new Date(a.date).toLocaleDateString("en-GB",{month:"short",day:"numeric"})}),(0,s.jsxs)("div",{style:{fontWeight:700,color:"var(--text-primary)"},children:["\xa3",a.value.toLocaleString("en-GB",{minimumFractionDigits:2})]})]})]})]})}function p(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0);(0,n.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=await fetch("/api/transactions"),a=await e.json();t(a.transactions||[])}catch(e){console.error("Error fetching transactions:",e)}finally{r(!1)}},o=async()=>{try{let e=await fetch("/api/export/csv"),t=await e.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="savings-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}catch(e){console.error("Export error:",e)}};if(a)return(0,s.jsx)("div",{className:"skeleton",style:{height:"300px"}});let l={};return e.forEach(e=>{let t=new Date(e.transaction_date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});l[t]||(l[t]=[]),l[t].push(e)}),(0,s.jsxs)("div",{children:[e.length>0&&(0,s.jsx)(h,{transactions:e}),(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"Balance History"}),(0,s.jsxs)("button",{className:"btn btn-secondary",style:{padding:"8px 14px",minHeight:"auto",fontSize:"0.75rem"},onClick:o,children:[(0,s.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,s.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,s.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Export"]})]}),(0,s.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-tertiary)",marginBottom:"var(--sp-lg)"},children:"A log of all balance changes across your accounts."}),0===e.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"\uD83D\uDCCB"}),(0,s.jsxs)("div",{className:"empty-state-text",children:["No history yet.",(0,s.jsx)("br",{}),"Balance changes will appear here."]})]}):Object.entries(l).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{style:{marginBottom:"var(--sp-xl)"},children:[(0,s.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-tertiary)",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"var(--sp-sm)",padding:"0 2px"},children:t}),(0,s.jsx)("div",{className:"stack",style:{gap:"var(--sp-xs)"},children:a.map(e=>(0,s.jsxs)("div",{className:"pot-item",style:{cursor:"default",padding:"var(--sp-sm) var(--sp-md)"},children:[(0,s.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"var(--r-md)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:"1rem",background:e.amount>=0?"linear-gradient(135deg, rgba(52, 211, 153, 0.15), rgba(52, 211, 153, 0.05))":"linear-gradient(135deg, rgba(248, 113, 113, 0.15), rgba(248, 113, 113, 0.05))"},children:e.amount>=0?"↗":"↙"}),(0,s.jsxs)("div",{className:"pot-info",children:[(0,s.jsx)("div",{style:{fontWeight:600,fontSize:"0.85rem"},children:e.account_name}),(0,s.jsxs)("div",{style:{fontSize:"0.7rem",color:"var(--text-tertiary)"},children:[e.description||e.pot_name," • ",e.user_name]})]}),(0,s.jsxs)("span",{style:{fontFamily:"var(--font-mono)",fontWeight:700,fontSize:"0.9rem",color:e.amount>=0?"var(--success)":"var(--error)"},children:[e.amount>=0?"+":"","\xa3",Math.abs(e.amount).toLocaleString("en-GB",{minimumFractionDigits:2})]})]},e.id))})]},t)})]})}function u(e){let{onUpdate:t}=e,[a,r]=(0,n.useState)([]),[i,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)({name:"",goalAmount:"",color:"#7B2FE0",icon:"piggy-bank"});(0,n.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/pots"),t=await e.json();r(t.pots||[])}catch(e){console.error("Error fetching pots:",e)}},m=async e=>{e.preventDefault();try{if(!(await fetch("/api/pots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,goalAmount:l.goalAmount?parseFloat(l.goalAmount.replace(/,/g,"")):null,color:l.color,icon:l.icon,priority:0})})).ok)throw Error("Failed to create pot");c({name:"",goalAmount:"",color:"#7B2FE0",icon:"piggy-bank"}),o(!1),d(),t()}catch(e){console.error("Error creating pot:",e),alert("Failed to create savings pot")}},x=async e=>{if(confirm("Delete this pot and all its accounts/transactions?"))try{if(!(await fetch("/api/pots/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete pot");d(),t()}catch(e){console.error("Error deleting pot:",e),alert("Failed to delete pot")}},h=[["house","\uD83C\uDFE1"],["piggy-bank","\uD83D\uDC37"],["car","\uD83D\uDE97"],["vacation","\uD83C\uDFD6️"],["emergency","\uD83D\uDEA8"],["wedding","\uD83D\uDC8D"],["education","\uD83C\uDF93"],["savings","\uD83D\uDCB0"],["tent","⛺"]];return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"Savings Pots"}),(0,s.jsx)("button",{className:"btn btn-primary",style:{padding:"8px 16px",minHeight:"auto",fontSize:"0.8rem"},onClick:()=>o(!i),children:i?"Cancel":"+ New Pot"})]}),i&&(0,s.jsxs)("form",{onSubmit:m,className:"card mb-lg",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Pot Name"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:l.name,onChange:e=>c({...l,name:e.target.value}),placeholder:"e.g., House Deposit",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Goal Amount (\xa3)"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:l.goalAmount,onChange:e=>c({...l,goalAmount:e.target.value}),onFocus:e=>{let t=e.target.value.replace(/,/g,"");c({...l,goalAmount:t})},onBlur:e=>{let t=e.target.value.replace(/,/g,"");if(t){let e=parseFloat(t);isNaN(e)||c({...l,goalAmount:e.toLocaleString("en-GB",{maximumFractionDigits:2})})}},placeholder:"Optional - e.g., 50,000"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Icon"}),(0,s.jsx)("div",{className:"flex gap-sm",style:{flexWrap:"wrap"},children:h.map(e=>{let[t,a]=e;return(0,s.jsx)("button",{type:"button",onClick:()=>c({...l,icon:t}),style:{width:"44px",height:"44px",borderRadius:"var(--r-md)",background:l.icon===t?"var(--purple-start)":"var(--bg-secondary)",border:l.icon===t?"2px solid var(--purple-mid)":"1px solid var(--border)",fontSize:"1.2rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all var(--t-fast)"},children:a},t)})})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Color"}),(0,s.jsx)("div",{className:"flex gap-sm",children:["#7B2FE0","#059669","#f59e0b","#ef4444","#3b82f6","#ec4899","#8b5cf6"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>c({...l,color:e}),style:{width:"36px",height:"36px",borderRadius:"var(--r-full)",background:e,border:l.color===e?"3px solid white":"2px solid transparent",cursor:"pointer",transition:"all var(--t-fast)"}},e))})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-teal",style:{width:"100%"},children:"Create Pot"})]}),(0,s.jsx)("div",{className:"stack",style:{gap:"var(--sp-sm)"},children:a.map(e=>{var t;let a="Unallocated"===e.name;return(0,s.jsxs)("div",{className:"pot-item",children:[(0,s.jsx)("div",{className:"pot-icon",style:{background:"".concat(e.color,"30"),fontSize:"1.3rem"},children:(null===(t=h.find(t=>{let[a]=t;return a===e.icon}))||void 0===t?void 0:t[1])||"\uD83D\uDCB0"}),(0,s.jsxs)("div",{className:"pot-info",children:[(0,s.jsx)("div",{className:"pot-name",children:e.name}),a?(0,s.jsx)("div",{className:"pot-meta",children:"Default \xb7 Cannot be deleted"}):e.goal_amount?(0,s.jsxs)("div",{className:"pot-meta",children:["Goal: \xa3",e.goal_amount.toLocaleString("en-GB")]}):null]}),!a&&(0,s.jsx)("button",{onClick:()=>x(e.id),className:"icon-btn",style:{color:"var(--error)"},children:(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,s.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},e.id)})})]})}function g(e){let{onUpdate:t,onAccountClick:a,currentUser:r}=e,[i,o]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)({potId:"",accountName:"",accountType:"savings",owner:(null==r?void 0:r.displayName)||"Joint",currentBalance:"",startingBalanceDate:new Date().toISOString().split("T")[0]});(0,n.useEffect)(()=>{p()},[]);let p=async()=>{try{let[e,t]=await Promise.all([fetch("/api/accounts"),fetch("/api/pots")]),a=await e.json(),s=(await t.json()).pots||[];if(o(a.accounts||[]),c(s),!x.potId){let e=s.find(e=>"Unallocated"===e.name);e&&h(t=>({...t,potId:String(e.id)}))}}catch(e){console.error("Error fetching data:",e)}},u=async e=>{e.preventDefault();try{if(!(await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({potId:parseInt(x.potId),accountName:x.accountName,accountType:x.accountType,owner:x.owner,currentBalance:parseFloat(x.currentBalance.replace(/,/g,""))||0,startingBalanceDate:x.startingBalanceDate})})).ok)throw Error("Failed to create account");h({potId:"",accountName:"",accountType:"savings",owner:(null==r?void 0:r.displayName)||"Joint",currentBalance:"",startingBalanceDate:new Date().toISOString().split("T")[0]}),m(!1),p(),t()}catch(e){console.error("Error creating account:",e),alert("Failed to create account")}},g=async e=>{if(confirm("Delete this account and all its transactions?"))try{if(!(await fetch("/api/accounts/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete account");p(),t()}catch(e){console.error("Error deleting account:",e),alert("Failed to delete account")}},v={savings:"Savings",isa:"ISA",current:"Current",investment:"Investment",other:"Other"},j={};return i.forEach(e=>{j[e.pot_name]||(j[e.pot_name]={color:e.pot_color,accounts:[]}),j[e.pot_name].accounts.push(e)}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"Your Accounts"}),(0,s.jsx)("button",{className:"btn btn-primary",style:{padding:"8px 16px",minHeight:"auto",fontSize:"0.8rem"},onClick:()=>m(!d),children:d?"Cancel":"+ Add Account"})]}),(0,s.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-tertiary)",marginBottom:"var(--sp-lg)"},children:"All your savings accounts, grouped by pot."}),d&&(0,s.jsxs)("form",{onSubmit:u,className:"card mb-lg",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Savings Pot"}),(0,s.jsx)("select",{className:"form-select",value:x.potId,onChange:e=>h({...x,potId:e.target.value}),required:!0,children:l.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Account Name"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:x.accountName,onChange:e=>h({...x,accountName:e.target.value}),placeholder:"e.g., HSBC Lifetime ISA",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Account Type"}),(0,s.jsxs)("select",{className:"form-select",value:x.accountType,onChange:e=>h({...x,accountType:e.target.value}),children:[(0,s.jsx)("option",{value:"savings",children:"Savings Account"}),(0,s.jsx)("option",{value:"isa",children:"ISA"}),(0,s.jsx)("option",{value:"current",children:"Current Account"}),(0,s.jsx)("option",{value:"investment",children:"Investment Account"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Owner"}),(0,s.jsxs)("select",{className:"form-select",value:x.owner,onChange:e=>h({...x,owner:e.target.value}),children:[(0,s.jsx)("option",{value:"Gary",children:"Gary"}),(0,s.jsx)("option",{value:"Catherine",children:"Catherine"}),(0,s.jsx)("option",{value:"Joint",children:"Joint"}),(null==r?void 0:r.displayName)&&!["Gary","Catherine","Joint"].includes(r.displayName)&&(0,s.jsx)("option",{value:r.displayName,children:r.displayName})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Starting Balance (\xa3)"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:x.currentBalance,onChange:e=>h({...x,currentBalance:e.target.value}),onFocus:e=>{let t=e.target.value.replace(/,/g,"");h({...x,currentBalance:t})},onBlur:e=>{let t=e.target.value.replace(/,/g,"");if(t){let e=parseFloat(t);isNaN(e)||h({...x,currentBalance:e.toLocaleString("en-GB",{minimumFractionDigits:2})})}},placeholder:"0.00",style:{fontFamily:"var(--font-mono)"}})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Starting Balance Date"}),(0,s.jsx)("input",{type:"date",className:"form-input",value:x.startingBalanceDate,onChange:e=>h({...x,startingBalanceDate:e.target.value}),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-teal",style:{width:"100%"},children:"Add Account"})]}),0===Object.keys(j).length&&!d&&(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"\uD83C\uDFE6"}),(0,s.jsxs)("div",{className:"empty-state-text",children:["No accounts yet.",(0,s.jsx)("br",{}),"Add your first bank account above!"]})]}),Object.entries(j).map(e=>{let[t,n]=e,r=n.accounts.reduce((e,t)=>e+t.current_balance,0);return(0,s.jsxs)("div",{style:{marginBottom:"var(--sp-xl)"},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",style:{marginBottom:"var(--sp-sm)",padding:"0 2px"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,s.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:n.color}}),(0,s.jsx)("span",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-tertiary)",textTransform:"uppercase",letterSpacing:"0.08em"},children:t})]}),(0,s.jsxs)("span",{style:{fontSize:"0.8rem",fontFamily:"var(--font-mono)",fontWeight:600,color:"var(--text-secondary)"},children:["\xa3",r.toLocaleString("en-GB",{minimumFractionDigits:2})]})]}),(0,s.jsx)("div",{className:"stack",style:{gap:"var(--sp-xs)"},children:n.accounts.map(e=>(0,s.jsxs)("div",{className:"pot-item",onClick:()=>a(e.id),children:[(0,s.jsx)("div",{className:"pot-icon",style:{background:"linear-gradient(135deg, ".concat(e.pot_color,"30, ").concat(e.pot_color,"10)"),fontSize:"1rem"},children:(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:e.pot_color||"var(--purple-mid)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,s.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]})}),(0,s.jsxs)("div",{className:"pot-info",children:[(0,s.jsx)("div",{className:"pot-name",children:e.account_name}),(0,s.jsxs)("div",{className:"pot-meta",children:[v[e.account_type]||e.account_type," \xb7",(0,s.jsx)("span",{style:{color:"Gary"===e.owner?"#3b82f6":"Catherine"===e.owner?"#ec4899":"inherit",fontWeight:600,marginLeft:"4px"},children:e.owner||"Joint"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,s.jsxs)("div",{className:"pot-amount",children:["\xa3",e.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),g(e.id)},className:"icon-btn",style:{color:"var(--error)",width:"32px",height:"32px"},children:(0,s.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},e.id))})]},t)})]})}function v(e){let{onSuccess:t,currentUser:a}=e,[r,i]=(0,n.useState)([]),[o,l]=(0,n.useState)({}),[c,d]=(0,n.useState)(!0),[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(new Set);(0,n.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/accounts"),t=(await e.json()).accounts||[];i(t);let a={};t.forEach(e=>{a[e.id]=e.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})}),l(a)}catch(e){console.error("Error fetching accounts:",e)}finally{d(!1)}},g=async e=>{let t=parseFloat((o[e.id]||"0").replace(/,/g,""));if(!isNaN(t)){x(!0);try{if(!(await fetch("/api/accounts/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountName:e.account_name,accountType:e.account_type,currentBalance:t})})).ok)throw Error("Failed to update");let s=t-e.current_balance;0!==s&&await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e.id,userId:a.id,amount:s,description:"Balance update: \xa3".concat(e.current_balance.toFixed(2)," → \xa3").concat(t.toFixed(2)),transactionDate:new Date().toISOString().split("T")[0]})}),p(t=>new Set(t).add(e.id)),setTimeout(()=>p(t=>{let a=new Set(t);return a.delete(e.id),a}),2e3)}catch(e){console.error("Error updating balance:",e),alert("Failed to update balance")}finally{x(!1)}}},v=async()=>{for(let e of(x(!0),r)){let t=parseFloat((o[e.id]||"0").replace(/,/g,""));isNaN(t)||t===e.current_balance||await g(e)}x(!1),t()};if(c)return(0,s.jsx)("div",{className:"skeleton",style:{height:"200px"}});let j={};return r.forEach(e=>{j[e.pot_name]||(j[e.pot_name]=[]),j[e.pot_name].push(e)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:{marginBottom:"var(--sp-xs)"},children:"Update Balances"}),(0,s.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-tertiary)",marginBottom:"var(--sp-lg)"},children:"Enter the current balance for each account. Changes are logged automatically."}),0===r.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"\uD83C\uDFE6"}),(0,s.jsx)("div",{className:"empty-state-text",children:"No accounts yet. Add some in Settings first!"})]}):(0,s.jsxs)(s.Fragment,{children:[Object.entries(j).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{style:{marginBottom:"var(--sp-lg)"},children:[(0,s.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-tertiary)",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"var(--sp-sm)",padding:"0 2px"},children:t}),(0,s.jsx)("div",{className:"stack",style:{gap:"var(--sp-sm)"},children:a.map(e=>(0,s.jsxs)("div",{className:"card",style:{padding:"var(--sp-md)"},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:e.account_name}),(0,s.jsxs)("div",{style:{fontSize:"0.7rem",color:"var(--text-tertiary)"},children:["Current: \xa3",e.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})," \xb7 ",e.account_type," \xb7",(0,s.jsx)("span",{style:{color:"Gary"===e.owner?"#3b82f6":"Catherine"===e.owner?"#ec4899":"inherit",fontWeight:600,marginLeft:"4px"},children:e.owner||"Joint"})]})]}),h.has(e.id)&&(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--success)",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[(0,s.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"20 6 9 17 4 12"})}),"Saved"]})]}),(0,s.jsxs)("div",{className:"flex gap-sm items-center",children:[(0,s.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,s.jsx)("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",fontWeight:600,fontSize:"1rem"},children:"\xa3"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:o[e.id]||"",onChange:t=>l({...o,[e.id]:t.target.value}),onFocus:t=>{let a=t.target.value.replace(/,/g,"");l({...o,[e.id]:a})},onBlur:t=>{let a=parseFloat(t.target.value.replace(/,/g,""));isNaN(a)||l({...o,[e.id]:a.toLocaleString("en-GB",{minimumFractionDigits:2})})},style:{paddingLeft:"28px",fontFamily:"var(--font-mono)",fontWeight:700,fontSize:"1.05rem"}})]}),(0,s.jsx)("button",{type:"button",className:"btn btn-teal",style:{padding:"12px 16px",minHeight:"auto",fontSize:"0.8rem"},onClick:()=>g(e),disabled:m||parseFloat((o[e.id]||"0").replace(/,/g,""))===e.current_balance,children:"Save"})]}),(()=>{let t=parseFloat((o[e.id]||"0").replace(/,/g,""));return t!==e.current_balance&&(0,s.jsxs)("div",{style:{fontSize:"0.75rem",marginTop:"6px",fontWeight:600,fontFamily:"var(--font-mono)",color:t>e.current_balance?"var(--success)":"var(--error)"},children:[t>e.current_balance?"+":"","\xa3",(t-e.current_balance).toLocaleString("en-GB",{minimumFractionDigits:2})," change"]})})()]},e.id))})]},t)}),(0,s.jsx)("button",{className:"btn btn-primary",style:{width:"100%",marginTop:"var(--sp-md)"},onClick:v,disabled:m,children:m?"Saving...":"Save All Changes"})]})]})}function j(e){let{accountId:t,currentUser:a,onClose:r,onUpdate:i}=e,[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[m,x]=(0,n.useState)(0),[h,p]=(0,n.useState)(!0),[u,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[b,N]=(0,n.useState)(null),[S,k]=(0,n.useState)(""),[w,C]=(0,n.useState)(""),[D,B]=(0,n.useState)("");(0,n.useEffect)(()=>{F()},[t]);let F=async()=>{try{let e=await fetch("/api/accounts/".concat(t)),a=await e.json();if(!e.ok)throw Error(a.error);l(a.account),d(a.history||[]),x(a.transactionCount||0),k(a.account.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})),C(a.account.account_type),B(a.account.owner||"Joint")}catch(e){console.error("Error fetching account:",e)}finally{p(!1)}},L=()=>!!o&&(w!==o.account_type||D!==(o.owner||"Joint")),_=async()=>{if(o){if(L()&&m>0&&!f){N({accountName:o.account_name,accountType:w,owner:D,currentBalance:parseFloat(S.replace(/,/g,""))}),y(!0);return}await z()}},z=async()=>{g(!0),y(!1);try{let e=parseFloat(S.replace(/,/g,""));if(!(await fetch("/api/accounts/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountName:o.account_name,accountType:w,owner:D,currentBalance:e})})).ok)throw Error("Failed to update");let s=e-o.current_balance;0!==s&&await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:o.id,userId:a.id,amount:s,description:"Balance update: \xa3".concat(o.current_balance.toFixed(2)," → \xa3").concat(e.toFixed(2)),transactionDate:new Date().toISOString().split("T")[0]})}),j(!0),setTimeout(()=>{j(!1),i(),r()},1200)}catch(e){console.error("Error saving:",e),alert("Failed to save changes")}finally{g(!1)}},T=o?parseFloat(S.replace(/,/g,""))-o.current_balance:0,A=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});return h?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"skeleton",style:{height:"40px",marginBottom:"16px"}}),(0,s.jsx)("div",{className:"skeleton",style:{height:"200px"}})]}):o?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{marginBottom:"var(--sp-lg)"},children:[(0,s.jsx)("h2",{style:{marginBottom:"4px"},children:o.account_name}),(0,s.jsxs)("div",{style:{fontSize:"0.8rem",color:"var(--text-tertiary)"},children:[o.pot_name," \xb7 ",{savings:"Savings",isa:"ISA",current:"Current",investment:"Investment",other:"Other"}[o.account_type]||o.account_type," \xb7 ",o.owner||"Joint"]}),(0,s.jsxs)("div",{style:{fontSize:"0.7rem",color:"var(--text-tertiary)",marginTop:"4px"},children:["Recording as at ",A]})]}),(0,s.jsxs)("div",{className:"card",style:{padding:"var(--sp-lg)",marginBottom:"var(--sp-lg)",textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontSize:"0.7rem",fontWeight:600,color:"var(--text-tertiary)",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"6px"},children:"Current Balance"}),(0,s.jsxs)("div",{style:{fontFamily:"var(--font-mono)",fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:["\xa3",o.current_balance.toLocaleString("en-GB",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"New Balance (\xa3)"}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",fontWeight:700,fontSize:"1.1rem"},children:"\xa3"}),(0,s.jsx)("input",{type:"text",className:"form-input",value:S,onChange:e=>k(e.target.value),onFocus:e=>{k(e.target.value.replace(/,/g,""))},onBlur:e=>{let t=e.target.value.replace(/,/g,"");if(t){let e=parseFloat(t);isNaN(e)||k(e.toLocaleString("en-GB",{minimumFractionDigits:2}))}},style:{paddingLeft:"30px",fontFamily:"var(--font-mono)",fontWeight:700,fontSize:"1.2rem"}})]}),0!==T&&!isNaN(T)&&(0,s.jsxs)("div",{style:{fontSize:"0.8rem",marginTop:"6px",fontWeight:700,fontFamily:"var(--font-mono)",color:T>0?"var(--success)":"var(--error)",display:"flex",alignItems:"center",gap:"4px"},children:[T>0?"↑":"↓"," ",T>0?"+":"","\xa3",T.toLocaleString("en-GB",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Account Type"}),(0,s.jsxs)("select",{className:"form-select",value:w,onChange:e=>C(e.target.value),children:[(0,s.jsx)("option",{value:"savings",children:"Savings Account"}),(0,s.jsx)("option",{value:"isa",children:"ISA"}),(0,s.jsx)("option",{value:"current",children:"Current Account"}),(0,s.jsx)("option",{value:"investment",children:"Investment Account"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Owner"}),(0,s.jsxs)("select",{className:"form-select",value:D,onChange:e=>B(e.target.value),children:[(0,s.jsx)("option",{value:"Gary",children:"Gary"}),(0,s.jsx)("option",{value:"Catherine",children:"Catherine"}),(0,s.jsx)("option",{value:"Joint",children:"Joint"})]})]}),f&&(0,s.jsx)("div",{style:{background:"rgba(251, 191, 36, 0.1)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"var(--r-lg)",padding:"var(--sp-md)",marginBottom:"var(--sp-md)"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"var(--sp-sm)"},children:[(0,s.jsx)("span",{style:{fontSize:"1.2rem",lineHeight:1},children:"⚠️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:700,fontSize:"0.85rem",color:"var(--warning)",marginBottom:"4px"},children:"Changing account details"}),(0,s.jsxs)("div",{style:{fontSize:"0.78rem",color:"var(--text-secondary)",lineHeight:1.5},children:["This account has ",(0,s.jsxs)("strong",{children:[m," balance change",1!==m?"s":""]})," in its history. Changing the type or owner won't affect historical records, but could make past entries misleading."]}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"6px",lineHeight:1.5},children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"Recommendation:"})," If this is a fundamentally different account, consider deleting this one and creating a new account instead to keep your history clean."]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"var(--sp-sm)",marginTop:"var(--sp-md)"},children:[(0,s.jsx)("button",{className:"btn btn-secondary",style:{flex:1,padding:"10px",minHeight:"auto",fontSize:"0.8rem"},onClick:()=>y(!1),children:"Cancel"}),(0,s.jsx)("button",{className:"btn",style:{flex:1,padding:"10px",minHeight:"auto",fontSize:"0.8rem",background:"var(--warning)",color:"#000",fontWeight:700},onClick:z,children:"Save Anyway"})]})]})]})}),!f&&(0,s.jsx)("button",{className:"btn btn-primary",style:{width:"100%",marginBottom:"var(--sp-lg)"},onClick:_,disabled:u||v||!(o&&parseFloat(S.replace(/,/g,""))!==o.current_balance)&&!L(),children:v?(0,s.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"20 6 9 17 4 12"})}),"Saved"]}):u?"Saving...":"Save Changes"}),c.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"section-header",style:{marginTop:"var(--sp-md)"},children:[(0,s.jsx)("div",{className:"section-title",style:{fontSize:"0.95rem"},children:"Balance History"}),(0,s.jsxs)("div",{className:"section-link",children:[c.length," record",1!==c.length?"s":""]})]}),(0,s.jsx)("div",{className:"stack",style:{gap:"var(--sp-xs)"},children:c.map((e,t)=>{let a=t<c.length-1?c[t+1].balance:null,n=null!==a?e.balance-a:null;return(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--sp-sm) var(--sp-md)",background:"var(--bg-card)",borderRadius:"var(--r-md)",border:"1px solid var(--border)"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontWeight:600},children:new Date(e.recorded_date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),null!==n&&(0,s.jsxs)("div",{style:{fontSize:"0.7rem",fontFamily:"var(--font-mono)",fontWeight:600,marginTop:"2px",color:n>=0?"var(--success)":"var(--error)"},children:[n>=0?"+":"","\xa3",n.toLocaleString("en-GB",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{style:{fontFamily:"var(--font-mono)",fontWeight:700,fontSize:"0.9rem",color:"var(--text-primary)"},children:["\xa3",e.balance.toLocaleString("en-GB",{minimumFractionDigits:2})]})]},t)})})]})]}):(0,s.jsx)("div",{className:"empty-state",children:(0,s.jsx)("div",{className:"empty-state-text",children:"Account not found"})})}function f(){var e;let[t,a]=(0,n.useState)(null),[r,i]=(0,n.useState)("home"),[o,c]=(0,n.useState)(!0),[d,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[y,b]=(0,n.useState)(0);(0,n.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();t.authenticated&&a(t.user)}}catch(e){console.error("Session check error:",e)}finally{c(!1)}},S=async()=>{await fetch("/api/auth/session",{method:"POST"}),a(null)},k=e=>{f(e)},w=()=>{f(null)};return o?(0,s.jsx)("div",{className:"app-shell",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100dvh"},children:(0,s.jsx)("div",{className:"skeleton",style:{width:"280px",height:"380px"}})}):t?(0,s.jsxs)("div",{className:"app-shell",children:[(0,s.jsxs)("div",{className:"app-header",children:[(0,s.jsxs)("div",{className:"header-user",children:[(0,s.jsx)("div",{className:"avatar",children:(null===(e=t.displayName)||void 0===e?void 0:e.charAt(0))||"U"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"header-greeting",children:"Welcome back"}),(0,s.jsx)("div",{className:"header-name",children:t.displayName})]})]}),(0,s.jsx)("div",{className:"header-actions",children:(0,s.jsx)("button",{className:"icon-btn",onClick:S,title:"Logout",children:(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,s.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,s.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})})]}),(0,s.jsxs)("div",{className:"app-content",children:["home"===r&&(0,s.jsx)(l,{onUpdateBalance:()=>m(!0),onAccountClick:k},y),"accounts"===r&&(0,s.jsx)(g,{onUpdate:()=>b(e=>e+1),onAccountClick:k,currentUser:t},y),"history"===r&&(0,s.jsx)(p,{},y),"manage"===r&&(0,s.jsx)(u,{onUpdate:()=>b(e=>e+1)},y)]}),(0,s.jsxs)("nav",{className:"tab-bar",children:[(0,s.jsxs)("button",{className:"tab-item".concat("home"===r?" active":""),onClick:()=>i("home"),children:[(0,s.jsx)("span",{className:"tab-icon",children:(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,s.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),"Home"]}),(0,s.jsxs)("button",{className:"tab-item".concat("accounts"===r?" active":""),onClick:()=>i("accounts"),children:[(0,s.jsx)("span",{className:"tab-icon",children:(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,s.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]})}),"Accounts"]}),(0,s.jsx)("button",{className:"tab-fab",onClick:()=>m(!0),title:"Update Balance",children:(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,s.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),(0,s.jsxs)("button",{className:"tab-item".concat("history"===r?" active":""),onClick:()=>i("history"),children:[(0,s.jsx)("span",{className:"tab-icon",children:(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),"History"]}),(0,s.jsxs)("button",{className:"tab-item".concat("manage"===r?" active":""),onClick:()=>i("manage"),children:[(0,s.jsx)("span",{className:"tab-icon",children:(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,s.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),"Settings"]})]}),d&&(0,s.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&m(!1)},children:(0,s.jsxs)("div",{className:"modal-sheet",children:[(0,s.jsx)("div",{className:"modal-handle"}),(0,s.jsx)(v,{onSuccess:()=>{m(!1),b(e=>e+1)},currentUser:t})]})}),null!==h&&(0,s.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&w()},children:(0,s.jsxs)("div",{className:"modal-sheet",children:[(0,s.jsx)("div",{className:"modal-handle"}),(0,s.jsx)(j,{accountId:h,currentUser:t,onClose:w,onUpdate:()=>{b(e=>e+1)}})]})})]}):(0,s.jsx)(x,{onLogin:a})}}},function(e){e.O(0,[59,971,23,744],function(){return e(e.s=9813)}),_N_E=e.O()}]);