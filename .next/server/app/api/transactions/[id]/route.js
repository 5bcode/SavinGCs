"use strict";(()=>{var e={};e.id=552,e.ids=[552],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},1017:e=>{e.exports=require("path")},3352:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>E,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{DELETE:()=>u});var s=r(9303),n=r(8716),o=r(670),i=r(7070),c=r(4677);async function u(e,t){let{id:r}=await t.params;try{let e=(await c.wp.execute({sql:"SELECT account_id, amount FROM transactions WHERE id = ?",args:[r]})).rows[0];if(!e)return i.NextResponse.json({error:"Transaction not found"},{status:404});let t=e.account_id,a=e.amount;return await c.wp.execute({sql:"DELETE FROM transactions WHERE id = ?",args:[r]}),await c.wp.execute({sql:`UPDATE accounts 
                  SET current_balance = current_balance - ?, last_updated = CURRENT_TIMESTAMP
                  WHERE id = ?`,args:[a,t]}),i.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting transaction:",e),i.NextResponse.json({error:"Failed to delete transaction"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/transactions/[id]/route",pathname:"/api/transactions/[id]",filename:"route",bundlePath:"app/api/transactions/[id]/route"},resolvedPagePath:"C:\\Users\\G\\Desktop\\SavinGCs\\app\\api\\transactions\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:E}=p,w="/api/transactions/[id]/route";function x(){return(0,o.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:d})}},4677:(e,t,r)=>{r.d(t,{wp:()=>s});let a=require("@libsql/client");require("fs"),r(1017),r(8691),process.env.DATABASE_URL?.includes("libsql")||process.env.DATABASE_URL?.includes("turso");let s=(0,a.createClient)({url:process.env.DATABASE_URL||"file:savings-tracker.db",authToken:process.env.DATABASE_AUTH_TOKEN});class n{prepare(e){return{get:async(...t)=>(await s.execute({sql:e,args:t})).rows[0],all:async(...t)=>(await s.execute({sql:e,args:t})).rows,run:async(...t)=>{let r=await s.execute({sql:e,args:t});return{lastInsertRowid:r.lastInsertRowid,changes:r.rowsAffected}}}}transaction(e){return async(...t)=>(console.warn("Transactions are not fully supported in async wrapper yet."),e(t))}pragma(e){}exec(e){return s.executeMultiple(e)}}new n}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972,691],()=>r(3352));module.exports=a})();